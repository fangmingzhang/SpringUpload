/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.53
 * Generated at: 2017-07-11 04:00:56 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.WEB_002dINF.views;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import com.pes.pageModel.base.Tree;
import com.pes.common.GobalDataManage;
import java.util.Map;
import com.pes.pageModel.base.SessionInfo;
import com.pes.pageModel.sys.Resource;
import com.pes.utils.DateUtils;
import java.util.List;

public final class index_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody;
  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
    _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.release();
    _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems.release();
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      if (_jspx_meth_c_005fset_005f0(_jspx_page_context))
        return;
      out.write("\r\n");
      out.write("<!DOCTYPE html>\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      org.apache.jasper.runtime.JspRuntimeLibrary.include(request, response, "inc.jsp", out, false);
      out.write("\r\n");
      out.write("<link rel='stylesheet' type='text/css' href='");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/jslib/fullcalendar-1.5.4/demos/cupertino/theme.css' />\r\n");
      out.write("<link rel='stylesheet' type='text/css' href='");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/jslib/fullcalendar-1.5.4/fullcalendar/fullcalendar.css' />\r\n");
      out.write("<link rel='stylesheet' type='text/css' href='");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/jslib/fullcalendar-1.5.4/fullcalendar/fullcalendar.print.css' media='print' /> \r\n");
      out.write("<link href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/css/base.css\" rel=\"stylesheet\">\r\n");
      out.write("<link href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/css/platform.css\" rel=\"stylesheet\">\r\n");
      out.write("<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/jslib/textarea/textareafullscreen.js\"></script>\r\n");
      out.write("<link rel=\"stylesheet\" href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/jslib/textarea/textareafullscreen.css\">\r\n");
      out.write("<script type='text/javascript' src='");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/jslib/fullcalendar-1.5.4//fullcalendar/fullcalendar.min.js'></script>\r\n");
      out.write("<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\r\n");
      out.write("<title>");
      out.print( GobalDataManage.getString("title") );
      out.write("</title>\r\n");
      out.write("<style type=\"text/css\">\r\n");
      out.write(".frontPageCls .tabs {\r\n");
      out.write("    padding-left: 24px !important;\r\n");
      out.write("   /*  height: 32px !important; */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".frontPageCls .tabs li a.tabs-inner {\r\n");
      out.write("   /*  height: 32px !important;*/\r\n");
      out.write("    line-height: 28px !important; \r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("#top_content .l-btn-plain:hover {\r\n");
      out.write("    padding: 0 0 0 0\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("#top_content .l-btn-plain {\r\n");
      out.write("    padding: 0 0 0 0\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("#top_content .l-btn-text:hover {\r\n");
      out.write("    color: #000;\r\n");
      out.write("}\r\n");
      out.write("</style>\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("    var currentUserPermissionKeyArray = [];\r\n");
      out.write("    var currentUserRoleArray = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${sessionInfo.roleIds}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("\".split(',');\r\n");
      out.write("    //alert(currentUserRoleArray.length);\r\n");
      out.write("</script>\r\n");

SessionInfo sessionInfo = (SessionInfo)request.getSession().getAttribute("sessionInfo");
List<String> permissionKeyLst = sessionInfo.getResourceList();
List<Resource> topRes = sessionInfo.getTopResource();
Map<String,List<Tree>> menuMap = (Map<String,List<Tree>>)request.getSession().getAttribute("menuMap");

      out.write('\r');
      out.write('\n');
      //  c:forEach
      org.apache.taglibs.standard.tag.rt.core.ForEachTag _jspx_th_c_005fforEach_005f0 = (org.apache.taglibs.standard.tag.rt.core.ForEachTag) _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems.get(org.apache.taglibs.standard.tag.rt.core.ForEachTag.class);
      _jspx_th_c_005fforEach_005f0.setPageContext(_jspx_page_context);
      _jspx_th_c_005fforEach_005f0.setParent(null);
      // /WEB-INF/views/index.jsp(59,0) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fforEach_005f0.setVar("name");
      // /WEB-INF/views/index.jsp(59,0) name = items type = javax.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fforEach_005f0.setItems( permissionKeyLst );
      int[] _jspx_push_body_count_c_005fforEach_005f0 = new int[] { 0 };
      try {
        int _jspx_eval_c_005fforEach_005f0 = _jspx_th_c_005fforEach_005f0.doStartTag();
        if (_jspx_eval_c_005fforEach_005f0 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
          do {
            out.write("\r\n");
            out.write("    <script type=\"text/javascript\">\r\n");
            out.write("     currentUserPermissionKeyArray.push(\"");
            out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${name}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
            out.write("\");\r\n");
            out.write("    </script>\r\n");
            int evalDoAfterBody = _jspx_th_c_005fforEach_005f0.doAfterBody();
            if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
              break;
          } while (true);
        }
        if (_jspx_th_c_005fforEach_005f0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
          return;
        }
      } catch (java.lang.Throwable _jspx_exception) {
        while (_jspx_push_body_count_c_005fforEach_005f0[0]-- > 0)
          out = _jspx_page_context.popBody();
        _jspx_th_c_005fforEach_005f0.doCatch(_jspx_exception);
      } finally {
        _jspx_th_c_005fforEach_005f0.doFinally();
        _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems.reuse(_jspx_th_c_005fforEach_005f0);
      }
      out.write("\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("    var index_layout;\r\n");
      out.write("    var index_tabs;\r\n");
      out.write("    var index_tabsMenu;\r\n");
      out.write("    var layout_west_tree;\r\n");
      out.write("    var layout_west_tree_url = '';\r\n");
      out.write("    var changPwdDialog;\r\n");
      out.write("    var loadSuccess = false;\r\n");
      out.write("    \r\n");
      out.write("    function myBrowser(){\r\n");
      out.write("        var userAgent = navigator.userAgent; //取得浏览器的userAgent字符串\r\n");
      out.write("        var isOpera = userAgent.indexOf(\"Opera\") > -1;\r\n");
      out.write("        if (isOpera) {\r\n");
      out.write("            return \"Opera\"\r\n");
      out.write("        }; //判断是否Opera浏览器\r\n");
      out.write("        if (userAgent.indexOf(\"Firefox\") > -1) {\r\n");
      out.write("            return \"FF\";\r\n");
      out.write("        } //判断是否Firefox浏览器\r\n");
      out.write("        if (userAgent.indexOf(\"Chrome\") > -1){\r\n");
      out.write("          return \"Chrome\";\r\n");
      out.write("        }\r\n");
      out.write("        if (userAgent.indexOf(\"Safari\") > -1) {\r\n");
      out.write("            return \"Safari\";\r\n");
      out.write("        } //判断是否Safari浏览器\r\n");
      out.write("        if (userAgent.indexOf(\"compatible\") > -1 && userAgent.indexOf(\"MSIE\") > -1 && !isOpera) {\r\n");
      out.write("            return \"IE\";\r\n");
      out.write("        }; //判断是否IE浏览器\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    var mb = myBrowser();\r\n");
      out.write("    if (\"FF\" != mb && \"Chrome\" != mb && \"Safari\" != mb) {\r\n");
      out.write("        window.location.href='");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/browserDownload.jsp';\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    var sessionInfo_userId = '");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${sessionInfo.id}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("';\r\n");
      out.write("    if (sessionInfo_userId) {//如果没有登录,直接跳转到登录页面\r\n");
      out.write("        layout_west_tree_url = '");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/resource/tree';\r\n");
      out.write("    }else{\r\n");
      out.write("        window.location.href='");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/admin/index';\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    var userType = '");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${sessionInfo.userType}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("';//用户类型\r\n");
      out.write("    \r\n");
      out.write("    $(function() {\r\n");
      out.write("        var date = new Date();\r\n");
      out.write("        var d = date.getDate();\r\n");
      out.write("        var m = date.getMonth();\r\n");
      out.write("        var y = date.getFullYear();\r\n");
      out.write("         var w=$('#home').width();\r\n");
      out.write("        $('#calendar').css('width',w-30); \r\n");
      out.write("        //$('#calendar').css('height',$(window).height() - 340); \r\n");
      out.write("        \r\n");
      out.write("        //日历\r\n");
      out.write("        $.ajax({\r\n");
      out.write("            url: '");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/admin/calendarList',\r\n");
      out.write("            type: 'POST',\r\n");
      out.write("            dataType: 'json',\r\n");
      out.write("            success: function (data) {\r\n");
      out.write("                \r\n");
      out.write("                var json = data;\r\n");
      out.write("                var infoxn = [];\r\n");
      out.write("                for(var i=0;i<json.length;i++){\r\n");
      out.write("                    infoxn.push(\r\n");
      out.write("                            {\r\n");
      out.write("                             title: json[i].title,\r\n");
      out.write("                             start: new Date(y, m,json[i].d),\r\n");
      out.write("                             id:json[i].id,\r\n");
      out.write("                             type:json[i].type\r\n");
      out.write("                            }\r\n");
      out.write("                            );\r\n");
      out.write("                    \r\n");
      out.write("                  }\r\n");
      out.write("                \r\n");
      out.write("                 $('#calendar').fullCalendar({\r\n");
      out.write("                     theme: true,\r\n");
      out.write("                     eventClick: function(event, jsEvent, view) {\r\n");
      out.write("                         $.ajax({\r\n");
      out.write("                             url: '");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/admin/calendartitle',\r\n");
      out.write("                             data: \"id=\"+event.id+\"&type=\"+event.type,\r\n");
      out.write("                             type: 'POST',\r\n");
      out.write("                             dataType: 'json',\r\n");
      out.write("                             success: function (data) {\r\n");
      out.write("                                 $.messager.alert('详情',data);\r\n");
      out.write("                                \r\n");
      out.write("                                 \r\n");
      out.write("                           }\r\n");
      out.write("                         })\r\n");
      out.write("                       \r\n");
      out.write("                        \r\n");
      out.write("                     },\r\n");
      out.write("                     header: {\r\n");
      out.write("                         left: 'prev,next today',\r\n");
      out.write("                         center: 'title',\r\n");
      out.write("                         right: ''\r\n");
      out.write("                     },\r\n");
      out.write("                     height: $(window).height() - 340,\r\n");
      out.write("                   \r\n");
      out.write("                     //设置日历头部的日期格式  \r\n");
      out.write("                    \r\n");
      out.write("                     editable: false,\r\n");
      out.write("                     events: infoxn\r\n");
      out.write("                 });\r\n");
      out.write("                }\r\n");
      out.write("        });\r\n");
      out.write("      //访问记录显示\r\n");
      out.write("          /*   $.ajax({\r\n");
      out.write("           url: '");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/historyView/view',\r\n");
      out.write("           type: 'POST',\r\n");
      out.write("           dataType: 'json',\r\n");
      out.write("           success: function (data) {\r\n");
      out.write("               var listmum=data.maximum;\r\n");
      out.write("               var listr=data.recent;\r\n");
      out.write("               for(var i=0 ; i<listmum.length ; i++){\r\n");
      out.write("               var one=$.formatString('<a style=\"padding: 2px\"  onclick=\"addTabview(\\'{0}\\',\\'{1}\\',\\'{2}\\')\" href=\"javascript:void(0);\" >'+\r\n");
      out.write("                       '<div style=\" float:left;padding: 10px;text-align:center;\"><img alt=\"\"  style=\"width:72px; height: 72px\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/style/images/2-0'+i+'.png\"></img></br><span style=\"font-size:12px;\">'\r\n");
      out.write("                       +listr[i].name+'</span></div></a>', listr[i].url,listr[i].name,listr[i].iconcls);\r\n");
      out.write("                var tow=$.formatString('<a style=\"padding: 2px\"  onclick=\"addTabview(\\'{0}\\',\\'{1}\\',\\'{2}\\')\" href=\"javascript:void(0);\" >'+\r\n");
      out.write("                       '<div style=\" float:left;padding: 10px;text-align:center;\"><img alt=\"\" style=\"width:72px; height: 72px\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/style/images/1-0'+i+'.png\"></img></br><span style=\"font-size:12px;\">'\r\n");
      out.write("                       +listmum[i].name+'</span></div></a>', listmum[i].url,listmum[i].name,listmum[i].iconcls);\r\n");
      out.write("                \r\n");
      out.write("                $(\"#viewone\").append(one);\r\n");
      out.write("                $(\"#viewtow\").append(tow);   \r\n");
      out.write("               }\r\n");
      out.write("               }\r\n");
      out.write("       });    */\r\n");
      out.write("         \r\n");
      out.write("        \r\n");
      out.write("        //initHintSound();\r\n");
      out.write("        \r\n");
      out.write("        toastr.options = {\r\n");
      out.write("                \"closeButton\": false,\r\n");
      out.write("                \"debug\": false,\r\n");
      out.write("                \"positionClass\": \"toast-top-full-width\",\r\n");
      out.write("                \"showDuration\": \"300\",\r\n");
      out.write("                \"hideDuration\": \"1000\",\r\n");
      out.write("                \"timeOut\": \"3000\",\r\n");
      out.write("                \"extendedTimeOut\": \"1000\",\r\n");
      out.write("                \"showEasing\": \"swing\",\r\n");
      out.write("                \"hideEasing\": \"linear\",\r\n");
      out.write("                \"showMethod\": \"fadeIn\",\r\n");
      out.write("                \"hideMethod\": \"fadeOut\"\r\n");
      out.write("                };\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("        index_layout = $('#index_layout').layout({\r\n");
      out.write("            fit : true\r\n");
      out.write("        });\r\n");
      out.write("\r\n");
      out.write("        index_tabs = $('#index_tabs').tabs({\r\n");
      out.write("            fit : true,\r\n");
      out.write("            border : false,\r\n");
      out.write("            tools : [{\r\n");
      out.write("                iconCls : 'icon-home',\r\n");
      out.write("                handler : function() {\r\n");
      out.write("                    index_tabs.tabs('select', 0);\r\n");
      out.write("                }\r\n");
      out.write("            }, {\r\n");
      out.write("                iconCls : 'icon-refresh',\r\n");
      out.write("                handler : function() {\r\n");
      out.write("                    //下面这种方式没有成功\r\n");
      out.write("                    /*\r\n");
      out.write("                    var index = index_tabs.tabs('getTabIndex', index_tabs.tabs('getSelected'));\r\n");
      out.write("                    index_tabs.tabs('getTab', index).panel('open').panel('refresh');\r\n");
      out.write("                    */\r\n");
      out.write("\r\n");
      out.write("                    //刷新当前tab\r\n");
      out.write("                    if( $('.tabs-panels > .panel:visible > .panel-body > iframe') \r\n");
      out.write("                            && $('.tabs-panels > .panel:visible > .panel-body > iframe').get(0)){\r\n");
      out.write("                     $('.tabs-panels > .panel:visible > .panel-body > iframe').get(0).contentDocument.location.reload(true);\r\n");
      out.write("                    }\r\n");
      out.write("                    //下面这种方式也可以\r\n");
      out.write("                    /*\r\n");
      out.write("                    var currTab = $('#index_tabs').tabs('getSelected');//获得当前tab\r\n");
      out.write("                    var url = $(currTab.panel('options').content).attr('src');\r\n");
      out.write("                    var iframe = '<iframe src=\"' + url + '\" frameborder=\"0\" style=\"border:0;width:100%;height:99.5%;\" scrolling=\"auto\"></iframe>';\r\n");
      out.write("                     $('#index_tabs').tabs('update', {\r\n");
      out.write("                            tab : currTab,\r\n");
      out.write("                            options : {\r\n");
      out.write("                                content : iframe\r\n");
      out.write("                            }\r\n");
      out.write("                        });\r\n");
      out.write("                    */\r\n");
      out.write("                }\r\n");
      out.write("            }, {\r\n");
      out.write("                iconCls : 'icon-del',\r\n");
      out.write("                handler : function() {\r\n");
      out.write("                    var tabs = index_tabs.tabs('tabs');\r\n");
      out.write("                    var num = tabs.length;\r\n");
      out.write("                    while(num > 1){\r\n");
      out.write("                        index_tabs.tabs('close', 1);\r\n");
      out.write("                        num = tabs.length;\r\n");
      out.write("                    }\r\n");
      out.write("                    \r\n");
      out.write("                    // var index = index_tabs.tabs('getTabIndex', index_tabs.tabs('getSelected'));\r\n");
      out.write("                    // var tab = index_tabs.tabs('getTab', index);\r\n");
      out.write("                    // if (tab.panel('options').closable) {\r\n");
      out.write("                    //  index_tabs.tabs('close', index);\r\n");
      out.write("                    // }\r\n");
      out.write("                }\r\n");
      out.write("            } ]\r\n");
      out.write("        });\r\n");
      out.write("\r\n");
      out.write("        /* layout_west_tree = $('#sysManageTree').tree({\r\n");
      out.write("            url : layout_west_tree_url,\r\n");
      out.write("            parentField : 'pid',\r\n");
      out.write("            lines : true,\r\n");
      out.write("            onClick : function(node) {\r\n");
      out.write("                if (node.attributes && node.attributes.url) {\r\n");
      out.write("                    var url = '");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("' + node.attributes.url;\r\n");
      out.write("                    //需要判断是否是外部系统页面\r\n");
      out.write("                    var tmpUrl = node.attributes.url.toLowerCase();\r\n");
      out.write("                    if(tmpUrl.indexOf(\"http\") == 0){\r\n");
      out.write("                        url = node.attributes.url;\r\n");
      out.write("                    }\r\n");
      out.write("\r\n");
      out.write("                    addTab({\r\n");
      out.write("                        url : url,\r\n");
      out.write("                        title : node.text,\r\n");
      out.write("                        iconCls : node.iconCls\r\n");
      out.write("                    });\r\n");
      out.write("                }\r\n");
      out.write("            }\r\n");
      out.write("        }); */\r\n");
      out.write("\r\n");
      out.write("        setInterval(\"showTime()\",990);\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("        //消息提醒列表\r\n");
      out.write("        $('#msgDataGrid').datagrid({\r\n");
      out.write("            url : '");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/msg/dataGridTopFive',\r\n");
      out.write("            title : '',\r\n");
      out.write("            fit : true,\r\n");
      out.write("            fitColumns : true,\r\n");
      out.write("            striped : true,\r\n");
      out.write("            rownumbers : false,\r\n");
      out.write("            pagination : false,\r\n");
      out.write("            singleSelect : true,\r\n");
      out.write("            pageSize : 5,\r\n");
      out.write("            columns : [ [ {\r\n");
      out.write("                width : '600',\r\n");
      out.write("                title : '消息内容',\r\n");
      out.write("                field : 'msgContent',\r\n");
      out.write("                sortable : false\r\n");
      out.write("            }, {\r\n");
      out.write("                width : '120',\r\n");
      out.write("                title : '消息创建时间',\r\n");
      out.write("                field : 'createTime',\r\n");
      out.write("                sortable : false\r\n");
      out.write("            },{\r\n");
      out.write("                field : 'action',\r\n");
      out.write("                title : '操作',\r\n");
      out.write("                width : 100,\r\n");
      out.write("                formatter : function(value, row, index) {\r\n");
      out.write("                    var str = '';\r\n");
      out.write("                    str += $.formatString('<a class=\"editcls\" data-options=\"iconCls:\\'icon-no\\'\" href=\"javascript:void(0)\" onclick=\"nohint(\\'{0}\\');\">不再提醒</a>', row.objId);\r\n");
      out.write("                    return str;\r\n");
      out.write("                }\r\n");
      out.write("            }] ],\r\n");
      out.write("            onLoadSuccess : function(){\r\n");
      out.write("                //setInterval(\"reloadHint()\",990 * 60 * 5);//5分钟刷新一次消息提醒\r\n");
      out.write("                $('.editcls').linkbutton({plain:true});\r\n");
      out.write("                //$('.editcls').addClass('fc-button');\r\n");
      out.write("                loadSuccess = true;\r\n");
      out.write("            },\r\n");
      out.write("            onLoadError : function(){\r\n");
      out.write("                //setInterval(\"reloadHint()\",990 * 60 * 5);//5分钟刷新一次消息提醒\r\n");
      out.write("                loadSuccess = false;\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("        });\r\n");
      out.write("\r\n");
      out.write("        reloadHint();\r\n");
      out.write("\r\n");
      out.write("        ");

        if("2".equals(sessionInfo.getUserType())){
            String exist = (String)request.getAttribute("exist");
            if("false".equals(exist)){
        
      out.write("\r\n");
      out.write("            /* $.messager.show({\r\n");
      out.write("                title:'提示',\r\n");
      out.write("                msg:'您尚未维护咨询师个人信息，请及时维护。',\r\n");
      out.write("                showType:'show'\r\n");
      out.write("            }); */\r\n");
      out.write("           // parent.$.messager.confirm('询问', '您尚未维护咨询师个人信息，是否现马上维护？', function(b) {\r\n");
      out.write("            //  if (b) {\r\n");
      out.write("                    editPersonInfo();\r\n");
      out.write("            //  }\r\n");
      out.write("            //});\r\n");
      out.write("\r\n");
      out.write("        ");

            }
        }
        
      out.write("\r\n");
      out.write("        \r\n");
      out.write("        $('.topBtn').each(function(){\r\n");
      out.write("            $(this).linkbutton({plain:true});\r\n");
      out.write("        });\r\n");
      out.write("\r\n");
      out.write("    });\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("    function nohint(id) {\r\n");
      out.write("        $.post('");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/msg/nohint', {\r\n");
      out.write("            id : id\r\n");
      out.write("        }, function(result) {\r\n");
      out.write("            $('#msgDataGrid').datagrid('reload');\r\n");
      out.write("        }, 'JSON');\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    function reloadHint(){\r\n");
      out.write("\r\n");
      out.write("      if(!loadSuccess){\r\n");
      out.write("          setTimeout(reloadHint,990 * 60 * 5);\r\n");
      out.write("          return;\r\n");
      out.write("      }\r\n");
      out.write("\r\n");
      out.write("      $('#msgDataGrid').datagrid('reload');\r\n");
      out.write("      setTimeout(reloadHint,990 * 60 * 5);\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    /* function reloadHint(){\r\n");
      out.write("        $('#msgDataGrid').datagrid('reload');\r\n");
      out.write("    } */\r\n");
      out.write("\r\n");
      out.write("    function addDate(dateObj,value){\r\n");
      out.write("        if(dateObj == null){\r\n");
      out.write("            return null;\r\n");
      out.write("        }\r\n");
      out.write("        result = dateObj;\r\n");
      out.write("        result.setSeconds(result.getSeconds() + value);\r\n");
      out.write("        return result;\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    Date.prototype.format = function(format){\r\n");
      out.write("        var o = {\r\n");
      out.write("            \"M+\" : this.getMonth()+1, //month\r\n");
      out.write("            \"d+\" : this.getDate(), //day\r\n");
      out.write("            \"h+\" : this.getHours(), //hour\r\n");
      out.write("            \"m+\" : this.getMinutes(), //minute\r\n");
      out.write("            \"s+\" : this.getSeconds(), //second\r\n");
      out.write("            \"q+\" : Math.floor((this.getMonth()+3)/3), //quarter\r\n");
      out.write("            \"S\" : this.getMilliseconds() //millisecond\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        if(/(y+)/.test(format)) {\r\n");
      out.write("            format = format.replace(RegExp.$1, (this.getFullYear()+\"\").substr(4 - RegExp.$1.length));\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        for(var k in o) {\r\n");
      out.write("            if(new RegExp(\"(\"+ k +\")\").test(format)) {\r\n");
      out.write("                format = format.replace(RegExp.$1, RegExp.$1.length==1 ? o[k] : (\"00\"+ o[k]).substr((\"\"+ o[k]).length));\r\n");
      out.write("            }\r\n");
      out.write("        }\r\n");
      out.write("        return format;\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    var serverCurrentDate = new Date(Date.parse(\"");
      out.print( DateUtils.getCurrTimeStr(DateUtils.HYPHEN_DISPLAY_DATE) );
      out.write("\".replace(/-/g,\"/\")));\r\n");
      out.write("    function showTime(){\r\n");
      out.write("        serverCurrentDate = addDate(serverCurrentDate,1);\r\n");
      out.write("        $(\"#headContent\").text(serverCurrentDate.format(\"yyyy-MM-dd hh:mm:ss\") + \"  星期\" + \"日一二三四五六\".charAt(serverCurrentDate.getDay()));\r\n");
      out.write("        //document.getElementById(\"headContent\").innerHTML = serverCurrentDate.toLocaleString() + \"  星期\" + \"日一二三四五六\".charAt(serverCurrentDate.getDay());\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    function addTabview(url,title,iconCls) {\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("                 var iframe = '<iframe src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("' + url + '\" frameborder=\"0\" style=\"border:0;width:100%;height:100%;\" scrolling=\"auto\"></iframe>';\r\n");
      out.write("                 var t = $('#index_tabs');\r\n");
      out.write("                 var opts = {\r\n");
      out.write("                     title : title,\r\n");
      out.write("                     closable : true,\r\n");
      out.write("                     iconCls : iconCls,\r\n");
      out.write("                     content : iframe,\r\n");
      out.write("                     border : false,\r\n");
      out.write("                     fit : true\r\n");
      out.write("                 };\r\n");
      out.write("                 if (t.tabs('exists', opts.title)) {\r\n");
      out.write("                     t.tabs('select', opts.title);\r\n");
      out.write("                 } else {\r\n");
      out.write("                     t.tabs('add', opts);\r\n");
      out.write("                }\r\n");
      out.write("                /*  $.ajax({\r\n");
      out.write("                     url: '");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/historyView/add',\r\n");
      out.write("                     type: 'GET',\r\n");
      out.write("                     data:'viewUrl='+url,\r\n");
      out.write("\r\n");
      out.write("                     success: function () {\r\n");
      out.write("\r\n");
      out.write("                         }\r\n");
      out.write("                 }); */\r\n");
      out.write("\r\n");
      out.write("    }\r\n");
      out.write("    function addTab(menuId,url,title,iconCls) {\r\n");
      out.write("         var t = $('#index_tabs');\r\n");
      out.write("         \r\n");
      out.write("        \r\n");
      out.write("        \r\n");
      out.write("        var params = {'url':url,'title': title,'iconCls':iconCls};\r\n");
      out.write("        var iframe = '<iframe src=\"' + params.url + '\" frameborder=\"0\" style=\"border:0;width:100%;height:100%;\" scrolling=\"auto\"></iframe>';\r\n");
      out.write("       \r\n");
      out.write("\r\n");
      out.write("        var opts = {\r\n");
      out.write("            title : params.title,\r\n");
      out.write("            closable : true,\r\n");
      out.write("            iconCls : params.iconCls,\r\n");
      out.write("            content : iframe,\r\n");
      out.write("            border : false,\r\n");
      out.write("            fit : true\r\n");
      out.write("        };\r\n");
      out.write("        if (t.tabs('exists', opts.title)) {\r\n");
      out.write("            t.tabs('select', opts.title);\r\n");
      out.write("            if(menuId != ''){\r\n");
      out.write("                $('.active').removeClass('active');\r\n");
      out.write("                $('#' + menuId).addClass('active');\r\n");
      out.write("            }\r\n");
      out.write("        } else {\r\n");
      out.write("            if(t.tabs('tabs').length > 9){\r\n");
      out.write("                alert('同时只能打开10个页签');\r\n");
      out.write("                return;\r\n");
      out.write("            }\r\n");
      out.write("            t.tabs('add', opts);\r\n");
      out.write("            t.tabs('resize');\r\n");
      out.write("            if(menuId != ''){\r\n");
      out.write("                $('.active').removeClass('active');\r\n");
      out.write("                $('#' + menuId).addClass('active');\r\n");
      out.write("            }\r\n");
      out.write("       }\r\n");
      out.write("       /*  var url=params.url.replace('");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("',\"\")\r\n");
      out.write("        $.ajax({\r\n");
      out.write("            url: '");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/historyView/add',\r\n");
      out.write("            type: 'GET',\r\n");
      out.write("            data:'viewUrl='+url,\r\n");
      out.write("\r\n");
      out.write("            success: function () {\r\n");
      out.write("\r\n");
      out.write("                }\r\n");
      out.write("        }); */\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("    }\r\n");
      out.write("    function logout(){\r\n");
      out.write("        $.messager.confirm('提示','确定要退出?',function(r){\r\n");
      out.write("            if (r){\r\n");
      out.write("                progressLoad();\r\n");
      out.write("                $.post( '");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/admin/logout', function(result) {\r\n");
      out.write("                    if(result.success){\r\n");
      out.write("                        progressClose();\r\n");
      out.write("                        window.location.href='");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/admin/index';\r\n");
      out.write("                    }\r\n");
      out.write("                }, 'json');\r\n");
      out.write("            }\r\n");
      out.write("        });\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("    function editUserPwd() {\r\n");
      out.write("        changPwdDialog = parent.$.modalDialog({\r\n");
      out.write("            title : '修改密码',\r\n");
      out.write("            width : 300,\r\n");
      out.write("            height : 250,\r\n");
      out.write("            href : '");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/user/editPwdPage',\r\n");
      out.write("            buttons : [ {\r\n");
      out.write("                id : 'editUserPwd_edit',\r\n");
      out.write("                text : '修改',\r\n");
      out.write("                handler : function() {\r\n");
      out.write("                    var f = parent.$.modalDialog.handler.find('#editUserPwdForm');\r\n");
      out.write("                    f.submit();\r\n");
      out.write("                }/* ,\r\n");
      out.write("                permissionKey : 'aabb' */,\r\n");
      out.write("            }],\r\n");
      out.write("\r\n");
      out.write("            onLoad : function(){\r\n");
      out.write("                //如果需要控制按钮是否可用，则需要在定义button时设置permissionKey,然后在这里调用permission方法\r\n");
      out.write("                /* permission('aabb'); */\r\n");
      out.write("                /*\r\n");
      out.write("                 changPwdDialog.dialog(\"addButtonsItem\", [{\r\n");
      out.write("                    //iconCls: 'icon-save',\r\n");
      out.write("                    id : \"test\",\r\n");
      out.write("                    text: \"保存\",\r\n");
      out.write("                    handler: function () {alert(\"1\"); }\r\n");
      out.write("                    }]);\r\n");
      out.write("                */\r\n");
      out.write("                //debugger;\r\n");
      out.write("                //changPwdDialog.dialog(\"removeButtonsItem\", \"修改\");\r\n");
      out.write("            }/* ,\r\n");
      out.write("            onClose : function(){\r\n");
      out.write("                alert('test');\r\n");
      out.write("                $.modalDialog.handler = undefined;\r\n");
      out.write("                $(this).dialog('destroy');\r\n");
      out.write("            } */\r\n");
      out.write("        });\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    function editPersonInfo(){\r\n");
      out.write("        parent.$.modalDialog({\r\n");
      out.write("            title : '修改咨询师个人信息',\r\n");
      out.write("            width : 700,\r\n");
      out.write("            height : 450,\r\n");
      out.write("            closable: false,\r\n");
      out.write("            href : '");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/user/counselorEditPage',\r\n");
      out.write("            buttons : [ {\r\n");
      out.write("                id : 'editPersonInfo_edit',\r\n");
      out.write("                text : '修改',\r\n");
      out.write("                handler : function() {\r\n");
      out.write("                    var f = parent.$.modalDialog.handler.find('#addForm');\r\n");
      out.write("                    f.submit();\r\n");
      out.write("                }\r\n");
      out.write("            }]\r\n");
      out.write("        });\r\n");
      out.write("\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    function moreHint(){\r\n");
      out.write("        addTab('','");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/msg/manager','消息提醒','');\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    function info(msg){\r\n");
      out.write("        toastr.info(msg);\r\n");
      out.write("    }\r\n");
      out.write("    function error(msg){\r\n");
      out.write("        toastr.error(msg);\r\n");
      out.write("    }\r\n");
      out.write("    function warning(msg){\r\n");
      out.write("        toastr.warning(msg);\r\n");
      out.write("    }\r\n");
      out.write("    function success(msg){\r\n");
      out.write("        toastr.success(msg);\r\n");
      out.write("    }\r\n");
      out.write("    \r\n");
      out.write("    \r\n");
      out.write("    \r\n");
      out.write("    var clickNode;\r\n");
      out.write("\r\n");
      out.write("    function favoriteFun(){\r\n");
      out.write("        $.post('");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/resource/addFavorite', {\r\n");
      out.write("            resourceId : clickNode.id\r\n");
      out.write("        }, function(result) {\r\n");
      out.write("            if (result.success) {\r\n");
      out.write("                top.window.info(result.msg);\r\n");
      out.write("                $('#menu_favorite').tree('reload');\r\n");
      out.write("            }\r\n");
      out.write("        }, 'JSON');\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("    function removeFavoriteFun(){\r\n");
      out.write("        $.post('");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/resource/delFavorite', {\r\n");
      out.write("            id : clickNode.id\r\n");
      out.write("        }, function(result) {\r\n");
      out.write("            if (result.success) {\r\n");
      out.write("                top.window.info(result.msg);\r\n");
      out.write("                $('#menu_favorite').tree('reload');\r\n");
      out.write("            }\r\n");
      out.write("        }, 'JSON');\r\n");
      out.write("    }\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("</script>\r\n");
      out.write("<style type=\"text/css\">\r\n");
      out.write("/* .topBtn .l-btn-left .l-btn-text{\r\n");
      out.write("    vertical-align:middle;\r\n");
      out.write("} */\r\n");
      out.write("</style>\r\n");
      out.write("</head>\r\n");
      out.write("<body>\r\n");
      out.write("    <div id=\"loading\"  style=\"position: fixed;top: -50%;left: -50%;width: 200%;height: 200%;background: #fff;z-index: 100;overflow: hidden;\">\r\n");
      out.write("    <img src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/style/images/ajax-loader.gif\" style=\"position: absolute;top: 0;left: 0;right: 0;bottom: 0;margin: auto;\"/>\r\n");
      out.write("    </div>\r\n");
      out.write("    \r\n");
      out.write("        \r\n");
      out.write("        <div class=\"container\" style=\"height: 100%;\">\r\n");
      out.write("            <div id=\"pf-hd\">\r\n");
      out.write("                <div id=\"header\">\r\n");
      out.write("                <span id=\"top_content\" style=\"float: right; padding-right: 20px;\">\r\n");
      out.write("                <a id=\"headContent\"></a>&nbsp;&nbsp;\r\n");
      out.write("                欢迎 <b>");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${sessionInfo.name}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("</b>&nbsp;&nbsp;\r\n");
      out.write("                <a class=\"topBtn\" data-options=\"iconCls:'icon-password'\" href=\"javascript:void(0)\" onclick=\"editUserPwd()\" style=\"color: #fff;\">修改密码</a>&nbsp;&nbsp;\r\n");
      out.write("                ");

                if("2".equals(sessionInfo.getUserType())){
                
      out.write("\r\n");
      out.write("                <a class=\"topBtn\" data-options=\"iconCls:'icon-application_edit'\" href=\"javascript:void(0)\" onclick=\"editPersonInfo()\" style=\"color: #fff;\">咨询师个人信息</a>&nbsp;&nbsp;\r\n");
      out.write("                ");

                }
                
      out.write("\r\n");
      out.write("                <a class=\"topBtn\" data-options=\"iconCls:'icon-out-sign'\" href=\"javascript:void(0)\" onclick=\"logout()\" style=\"color: #fff;\">安全退出</a>\r\n");
      out.write("                &nbsp;&nbsp;&nbsp;&nbsp;\r\n");
      out.write("                </span>\r\n");
      out.write("                <span class=\"header\"></span>\r\n");
      out.write("            </div>\r\n");
      out.write("            </div>\r\n");
      out.write("            <div id=\"pf-bd\">\r\n");
      out.write("                <div id=\"pf-sider\">\r\n");
      out.write("                   <h2 class=\"pf-model-name\">\r\n");
      out.write("                    <span class=\"iconfont\">&#xe64a;</span>\r\n");
      out.write("                    <span class=\"pf-name\">主导航</span>\r\n");
      out.write("                    <span class=\"toggle-icon\"></span>\r\n");
      out.write("                   </h2>\r\n");
      out.write("                    <ul class=\"sider-nav\">\r\n");
      out.write("                ");
 
                for(int i=0 ; i<topRes.size() ; i++){
                    Resource res = topRes.get(i);
                    List<Tree> menus = menuMap.get(res.getId());
                
      out.write("\r\n");
      out.write("                 <li ");
 if(i==0){ 
      out.write("class=\"current\"");
}else{ 
      out.write("href=\"javascript:;\" ");
 } 
      out.write(">\r\n");
      out.write("                     <a href=\"javascript:;\">\r\n");
      out.write("                            <span class=\"iconfont sider-nav-icon\">&#xe620;</span>\r\n");
      out.write("                            <span class=\"sider-nav-title\" style=\"font-size: 12px;\">");
      out.print( res.getName() );
      out.write("</span>\r\n");
      out.write("                            <i class=\"iconfont\">&#xe642;</i>\r\n");
      out.write("                        </a>\r\n");
      out.write("                       <ul class=\"sider-nav-s\">\r\n");
      out.write("                       ");

                       if(menus != null && menus.size() > 0){
                           for(int j=0 ; j<menus.size() ;j++){
                            Tree menu = menus.get(j);
                            Map attr = (Map)menu.getAttributes();
                            String url = (String)attr.get("url");
                       
      out.write("   \r\n");
      out.write("                            <li id='");
      out.print( menu.getId() );
      out.write("'><a href=\"javascript:void(0)\" onclick=\"addTab('");
      out.print( menu.getId() );
      out.write('\'');
      out.write(',');
      out.write('\'');
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.print( url );
      out.write('\'');
      out.write(',');
      out.write('\'');
      out.print( menu.getText() );
      out.write('\'');
      out.write(',');
      out.write('\'');
      out.print( menu.getIconCls() );
      out.write("')\">");
      out.print( menu.getText() );
      out.write("</a></li>\r\n");
      out.write("                       ");

                           }
                       } 
                       
      out.write("\r\n");
      out.write("                       </ul>\r\n");
      out.write("                 </li>\r\n");
      out.write("                 ");
  } 
      out.write("\r\n");
      out.write("                \r\n");
      out.write("                 </ul> \r\n");
      out.write("                </div>\r\n");
      out.write("                \r\n");
      out.write("                <div id=\"pf-page\">\r\n");
      out.write("            <div id=\"index_tabs\" style=\"overflow: hidden;\" data-options=\"fit : true\" class=\"frontPageCls\">\r\n");
      out.write("                <div title=\"首页\" data-options=\"border:false\" style=\"overflow: hidden;\">\r\n");
      out.write("                    <div class=\"easyui-layout\" data-options=\"fit:true\" style=\"padding:0px 0 0px 0px\">\r\n");
      out.write("                        <!-- <h2>系统介绍</h2>\r\n");
      out.write("                        <div class=\"light-info\">\r\n");
      out.write("                            <div class=\"light-tip icon-tip\"></div>\r\n");
      out.write("                            <div>JAVA快速开发平台。</div>\r\n");
      out.write("                        </div> -->\r\n");
      out.write("                          <div id=\"home\" data-options=\"region:'center',border:false\" style=\"padding:5px 0 0px 5px;overflow: auto;height: 60%;\" >\r\n");
      out.write("                            \r\n");
      out.write("                            <div id='calendar' data-options=\"fit:true\"></div>\r\n");
      out.write("\r\n");
      out.write("                          </div> \r\n");
      out.write("                        <div data-options=\"region:'south',border:false,title:'消息提醒'\" style=\"overflow: auto;height: 40%;\">\r\n");
      out.write("                            <div class=\"easyui-layout\" style=\"height: 100%;\">\r\n");
      out.write("                                <div data-options=\"region:'center',border:false\">\r\n");
      out.write("                                    <table id=\"msgDataGrid\" data-options=\"border:false\"></table>\r\n");
      out.write("                                </div>\r\n");
      out.write("                                <div style=\"text-align: right;height: 50px;\" data-options=\"region:'south',border:false\">\r\n");
      out.write("                                    <a  onclick=\"moreHint();\" href=\"javascript:void(0);\" class=\"easyui-linkbutton\" data-options=\"plain:true,iconCls:'icon-add'\">更多</a>  \r\n");
      out.write("                                </div> \r\n");
      out.write("                            </div>\r\n");
      out.write("                            \r\n");
      out.write("                            \r\n");
      out.write("                            \r\n");
      out.write("                            \r\n");
      out.write("                        </div> \r\n");
      out.write("                        \r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("                    </div>\r\n");
      out.write("\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("            </div>\r\n");
      out.write("            </div>\r\n");
      out.write("            <div id=\"pf-ft\">\r\n");
      out.write("            <div class=\"system-name\">\r\n");
      out.write("              <i class=\"iconfont\">&#xe6fe;</i>\r\n");
      out.write("              <span>心理测评训练系统&nbsp;v1.0</span>\r\n");
      out.write("            </div>\r\n");
      out.write("            <div class=\"copyright-name\">\r\n");
      out.write("              <span>");
      out.print( GobalDataManage.getString("copyright") );
      out.write("</span>\r\n");
      out.write("              <i class=\"iconfont\" >&#xe6ff;</i>\r\n");
      out.write("            </div>\r\n");
      out.write("        </div>\r\n");
      out.write("            \r\n");
      out.write("        </div>\r\n");
      out.write("        \r\n");
      out.write("        \r\n");
      out.write("    \r\n");
      out.write("     \r\n");
      out.write("      <div id=\"menu\" class=\"easyui-menu\" style=\"width:100px;\">\r\n");
      out.write("        <div id=\"favorite\" onclick=\"javascript:favoriteFun();\">收藏</div>\r\n");
      out.write("    </div>\r\n");
      out.write("\r\n");
      out.write("    <div id=\"menu2\" class=\"easyui-menu\" style=\"width:100px;\">\r\n");
      out.write("        <div onclick=\"javascript:removeFavoriteFun();\">取消收藏</div>\r\n");
      out.write("    </div>\r\n");
      out.write("    <!--[if lte IE 7]>\r\n");
      out.write("    <div id=\"ie6-warning\"><p>您正在使用 低版本浏览器，在本页面可能会导致部分功能无法使用。建议您升级到 <a href=\"http://www.microsoft.com/china/windows/internet-explorer/\" target=\"_blank\">Internet Explorer 8</a> 或以下浏览器：\r\n");
      out.write("    <a href=\"http://www.mozillaonline.com/\" target=\"_blank\">Firefox</a> / <a href=\"http://www.google.com/chrome/?hl=zh-CN\" target=\"_blank\">Chrome</a> / <a href=\"http://www.apple.com.cn/safari/\" target=\"_blank\">Safari</a> / <a href=\"http://www.operachina.com/\" target=\"_blank\">Opera</a></p></div>\r\n");
      out.write("    <![endif]-->\r\n");
      out.write("\r\n");
      out.write("    <style>\r\n");
      out.write("        /*ie6提示*/\r\n");
      out.write("        #ie6-warning{width:100%;position:absolute;top:0;left:0;background:#fae692;padding:5px 0;font-size:12px}\r\n");
      out.write("        #ie6-warning p{width:960px;margin:0 auto;}\r\n");
      out.write("    </style>\r\n");
      out.write("    <script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/js/main.js\"></script>\r\n");
      out.write("</body>\r\n");
      out.write("</html>\r\n");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try { out.clearBuffer(); } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }

  private boolean _jspx_meth_c_005fset_005f0(javax.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:set
    org.apache.taglibs.standard.tag.rt.core.SetTag _jspx_th_c_005fset_005f0 = (org.apache.taglibs.standard.tag.rt.core.SetTag) _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.SetTag.class);
    _jspx_th_c_005fset_005f0.setPageContext(_jspx_page_context);
    _jspx_th_c_005fset_005f0.setParent(null);
    // /WEB-INF/views/index.jsp(10,0) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
    _jspx_th_c_005fset_005f0.setVar("ctx");
    // /WEB-INF/views/index.jsp(10,0) name = value type = javax.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
    _jspx_th_c_005fset_005f0.setValue(new org.apache.jasper.el.JspValueExpression("/WEB-INF/views/index.jsp(10,0) '${pageContext.request.contextPath}'",_el_expressionfactory.createValueExpression(_jspx_page_context.getELContext(),"${pageContext.request.contextPath}",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
    int _jspx_eval_c_005fset_005f0 = _jspx_th_c_005fset_005f0.doStartTag();
    if (_jspx_th_c_005fset_005f0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
      _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.reuse(_jspx_th_c_005fset_005f0);
      return true;
    }
    _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.reuse(_jspx_th_c_005fset_005f0);
    return false;
  }
}
